name: Test Contract Verification

on:
  workflow_dispatch:
    inputs:
      networks:
        description: "Networks to test (comma-separated: devnet,mainnet,testnet)"
        required: false
        default: "devnet,mainnet,testnet"
      verifier-url:
        description: "Verifier URL"
        required: false
        default: "https://contracts.porto.workers.dev"
  schedule:
    - cron: "0 */6 * * *"

jobs:
  tempo-deploy-devnet:
    if: contains(github.event.inputs.networks || 'devnet,mainnet,testnet', 'devnet')
    uses: tempoxyz/tempo-foundry/.github/workflows/ci-tempo.yml@george/split-tempo-check-scripts
    with:
      network: devnet
      deploy_only: true
      rpc_url: https://rpc.devnet.tempoxyz.dev
      verifier_url: ${{ github.event.inputs.verifier-url || 'https://contracts.porto.workers.dev' }}

  tempo-deploy-testnet:
    if: contains(github.event.inputs.networks || 'devnet,mainnet,testnet', 'testnet')
    uses: tempoxyz/tempo-foundry/.github/workflows/ci-tempo.yml@george/split-tempo-check-scripts
    with:
      network: testnet
      deploy_only: true
      rpc_url: https://rpc.testnet.tempo.xyz
      verifier_url: ${{ github.event.inputs.verifier-url || 'https://contracts.porto.workers.dev' }}

  tempo-deploy-mainnet:
    if: contains(github.event.inputs.networks || 'devnet,mainnet,testnet', 'mainnet')
    uses: tempoxyz/tempo-foundry/.github/workflows/ci-tempo.yml@george/split-tempo-check-scripts
    with:
      network: mainnet
      deploy_only: true
      rpc_url: https://rpc.mainnet.tempo.xyz
      verifier_url: ${{ github.event.inputs.verifier-url || 'https://contracts.porto.workers.dev' }}
